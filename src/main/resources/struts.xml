<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.1//EN"
    "http://struts.apache.org/dtds/struts-2.1.dtd">
<struts>
    <!-- å¼•ç”¨ Struts é è¨­è¨­å®š -->
    <!-- <include file="struts-default.xml" />
    <include file="struts/struts-login.xml" />
    <include file="struts/struts-home.xml" />
    <include file="struts/struts-register.xml" /> -->

    <!-- å¸¸æ•¸é…ç½® -->
    <!-- æ ¸å¿ƒè¨­å®šæª” -->
    <!-- struts.multipart.maxSize -> file upload -->
    <constant name="struts.multipart.maxSize" value="2097152000" />
    <!-- è¨­å®š url é¡¯ç¤º OOXX.extension(å‰¯æª”å) OOXX.ation -->
    <constant name="struts.action.extension" value="action,do,," />

    <!-- ðŸ”¹ æ—¢æœ‰ default packageï¼Œå…§å«å…¨åŸŸæ””æˆªå™¨è¨­å®š -->
    <package name="default" extends="struts-default">
        <interceptors>
            <interceptor name="authenticationInterceptor"
                class="com.example.interceptor.AuthenticationInterceptor" />
            <interceptor-stack name="globalStack">
                <interceptor-ref name="authenticationInterceptor" />
                <interceptor-ref name="fileUpload" />
                <interceptor-ref name="modelDrivenStack" />
            </interceptor-stack>
        </interceptors>

        <default-interceptor-ref name="globalStack" />

        <global-results>
            <result name="login" type="dispatcher">/WEB-INF/views/login.jsp</result>
            <result name="error" type="redirect">/404.html</result>
            <result name="other" type="redirectAction">
                <param name="actionName">login</param>
                <param name="namespace">/</param>
            </result>
        </global-results>

        <global-exception-mappings>
            <exception-mapping exception="java.lang.Exception" result="error" />
        </global-exception-mappings>
    </package>

    <!-- æ–°å¢žçš„ product å°ˆç”¨ action package -->
    <package name="product" namespace="/product" extends="default">

        <!-- æŸ¥è©¢æ‰€æœ‰å•†å“ï¼ˆæ”¹ç”¨ /WEB-INF è·¯å¾‘ï¼‰ -->
        <action name="findAll" class="com.example.action.ProductAction" method="findAll">
            <result name="success">/WEB-INF/jsp/ProductList.jsp</result>
        </action>

        <!-- æŸ¥è©¢å–®ä¸€å•†å“ï¼ˆä½ å¯å¾ŒçºŒå»ºç«‹ ProductDetail.jspï¼‰ -->
        <action name="findById" class="com.example.action.ProductAction" method="findById">
            <result name="success">/WEB-INF/jsp/ProductDetail.jsp</result>
        </action>

        <!-- æ–°å¢žå•†å“ -->
        <action name="add" class="com.example.action.ProductAction" method="add">
            <result name="success" type="redirect">findAll</result>
        </action>

        <!-- ä¿®æ”¹å•†å“ -->
        <action name="update" class="com.example.action.ProductAction" method="update">
            <result name="success" type="redirect">findAll</result>
        </action>

        <!-- åˆªé™¤å•†å“ -->
        <action name="delete" class="com.example.action.ProductAction" method="delete">
            <result name="success" type="redirect">findAll</result>
        </action>
    </package>

    <!-- åŠ å…¥çš„å…¶ä»–åŠŸèƒ½æ¨¡çµ„ æ”¾åœ¨æŒ‡å®šçš„ classpath ä¹‹ä¸‹-->
    <!-- file æŒ‡å®šå…¶ä»–è¨­å®šæª”èˆ‡è·¯å¾‘ åœ¨ä¸»è¨­å®šæª”çš„ classpath ä¹‹ä¸‹ -->
    <!-- <include file="struts/struts-login.xml"/>
    <include file="struts/struts-register.xml"/>
    <include file="struts/struts-home.xml"/> -->
    <!-- æ¸¬è©¦ç¹¼çºŒåŠ å…¥ç›¸åŒçš„ include -->
    <include file="struts-default.xml" />
    <include file="struts/struts-login.xml" />
    <include file="struts/struts-home.xml" />
    <include file="struts/struts-register.xml" />
</struts>
